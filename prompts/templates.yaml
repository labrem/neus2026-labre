# OpenMath LLM Prompt Templates
# =============================
#
# Templates for different experimental conditions:
# - baseline: No OpenMath augmentation
# - definitions: Symbol names and descriptions only
# - with_fmp: Definitions + type signatures + CMP properties
# - full_system: All above + SymPy function references + code instructions
#
# Template Variables:
# - {problem}: The mathematical problem statement
# - {openmath_context}: Retrieved OpenMath symbol definitions
# - {sympy_functions}: List of SymPy function mappings

version: "1.0.0"

# Experimental conditions
conditions:
  baseline:
    name: "Baseline (No OpenMath)"
    description: "Raw model without any OpenMath augmentation"
    include_definitions: false
    include_types: false
    include_properties: false
    include_sympy: false
    include_code_instructions: false

  definitions:
    name: "OpenMath Definitions Only"
    description: "Symbol names and descriptions"
    include_definitions: true
    include_types: false
    include_properties: false
    include_sympy: false
    include_code_instructions: false

  openmath:
    name: "OpenMath with FMPs"
    description: "Definitions + type signatures + properties"
    include_definitions: true
    include_types: true
    include_properties: true
    include_sympy: false
    include_code_instructions: false

  full_system:
    name: "Full System"
    description: "Complete system with SymPy execution"
    include_definitions: true
    include_types: true
    include_properties: true
    include_sympy: true
    include_code_instructions: true

# System prompt templates
templates:
  baseline:
    system: |
      You are a mathematical reasoning assistant. Solve the given problem step by step.

      Think through the problem carefully and provide your final answer.

      IMPORTANT: You MUST put your final answer inside \boxed{{}}.
      Example: If the answer is 42, write \boxed{{42}}
      Example: If the answer is x^2 + 3x - 5, write \boxed{{x^2 + 3x - 5}}
      Example: If the answer is y = 2x + 3, write \boxed{{y = 2x + 3}}

    user: |
      Problem: {problem}

      Solve step by step, then put your final answer in \boxed{{}}.

  definitions:
    system: |
      You are a mathematical reasoning assistant with access to formal definitions
      from the OpenMath standard.

      IMPORTANT: The following mathematical definitions are ESSENTIAL for solving this
      problem correctly. You MUST reference and apply these definitions explicitly
      in your reasoning steps.

      ## Relevant Mathematical Definitions
      {openmath_context}

      ## Instructions
      1. Carefully read the definitions above BEFORE starting your solution
      2. Identify which definitions apply to this problem
      3. Explicitly reference the definitions as you reason through each step
      4. Solve the problem step by step using these formal definitions

      IMPORTANT: You MUST put your final answer inside \boxed{{}}.
      Example: If the answer is 42, write \boxed{{42}}
      Example: If the answer is x^2 + 3x - 5, write \boxed{{x^2 + 3x - 5}}

    user: |
      Problem: {problem}

      Solve step by step using the mathematical definitions above. Reference the
      definitions explicitly in your reasoning, then put your final answer in \boxed{{}}.

  openmath:
    system: |
      You are a mathematical reasoning assistant with access to formal definitions
      and mathematical properties from the OpenMath standard.

      IMPORTANT: The following mathematical definitions and properties are ESSENTIAL
      for solving this problem correctly. You MUST reference and apply these
      definitions and properties explicitly in your reasoning steps.

      ## Relevant Mathematical Definitions and Properties
      {openmath_context}

      ## Instructions
      1. Carefully read ALL definitions and properties above BEFORE starting
      2. Identify which definitions and properties apply to this problem
      3. Apply the mathematical properties (e.g., commutativity, associativity) explicitly
      4. Reference the formal definitions as you reason through each step
      5. Ensure your solution adheres to the stated mathematical properties

      IMPORTANT: You MUST put your final answer inside \boxed{{}}.
      Example: If the answer is 42, write \boxed{{42}}
      Example: If the answer is 6r^2 - 4r - 24, write \boxed{{6r^2 - 4r - 24}}

    user: |
      Problem: {problem}

      Solve step by step using the formal definitions and properties above.
      Reference them explicitly in your reasoning, then put your final answer in \boxed{{}}.

  full_system:
    system: |
      You are a mathematical reasoning assistant with access to formal definitions
      from the OpenMath standard and SymPy for symbolic computation.

      IMPORTANT: The following mathematical definitions and properties are ESSENTIAL
      for solving this problem correctly. You MUST reference and apply these
      definitions explicitly in your reasoning and code.

      ## Relevant Mathematical Definitions and Properties
      {openmath_context}

      ## Available SymPy Functions
      {sympy_functions}

      ## Instructions
      1. Carefully read ALL definitions and properties above BEFORE starting
      2. Identify which definitions apply to this problem
      3. Use the corresponding SymPy functions for computation
      4. Generate Python/SymPy code to compute the answer
      5. Wrap code in ```python ... ``` blocks
      6. Reference formal definitions to verify your approach is correct
      7. IMPORTANT: Put your final answer inside \boxed{{}}

      Example final answers:
      - Numeric: \boxed{{42}}
      - Expression: \boxed{{6r^2 - 4r - 24}}
      - Equation: \boxed{{y = 2x + 3}}

    user: |
      Problem: {problem}

      Solve step by step using the formal definitions and SymPy code.
      Reference the definitions in your reasoning, then put your final answer in \boxed{{}}.

# Symbol formatting templates
symbol_formats:
  # Format for definition-only mode
  definition_only: |
    ### {symbol_id}
    **Description:** {description}

  # Format with type signature
  with_type: |
    ### {symbol_id}
    **Description:** {description}
    **Type:** {type_signature}

  # Format with properties
  with_properties: |
    ### {symbol_id}
    **Description:** {description}
    **Type:** {type_signature}
    **Properties:**
    {properties}

  # Format with SymPy
  full: |
    ### {symbol_id}
    **Description:** {description}
    **Type:** {type_signature}
    **Properties:**
    {properties}
    **SymPy:** `{sympy_function}`

# SymPy functions section format
sympy_section: |
  The following SymPy functions are available for computation:
  {function_list}

  Import with: `import sympy`
